<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><title>Learning Docker - Rohan Pande</title><link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,700" rel="stylesheet"><link rel="stylesheet" href=/css/main.css><meta name="viewport" content="width=device-width, initial-scale=1"><title>Learning Docker - Rohan Pande</title><meta property="og:title" content="Learning Docker" /><meta name="description" content="To Run= docker run docker/whalesay cowsay boo" /><meta property="og:description" content="To Run= docker run docker/whalesay cowsay boo" /><link rel="canonical" href="http://localhost:4000/learning-docker/" /><meta property="og:url" content="http://localhost:4000/learning-docker/" /><meta property="og:site_name" content="Rohan Pande" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2017-02-22T14:12:47+05:30" /><script type="application/ld+json"> { "@context": "http://schema.org", "@type": "BlogPosting", "headline": "Learning Docker", "datePublished": "2017-02-22T14:12:47+05:30", "description": "To Run= docker run docker/whalesay cowsay boo", "url": "http://localhost:4000/learning-docker/" }</script></head><body><header><div id="mySidenav" class="sidenav"> <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a> <a href="/"><h1 class="header-title" style="font-size: 1.5em;color: #999">Rohan Pande&nbsp;<i class="fa fa-sun-o" aria-hidden="true"></i></h1></a> <a href="/">Home</a> <a href="/about/">About</a> <a href="/contact/">Contact</a></div><span id="slid" onclick="openNav()"><i class="fa fa-align-left" aria-hidden="true"></i></span></header><div id="main"><div class="page-container"><img class="featured-img" src=/images-hq/DLINKDW131.jpg alt="Learning Docker"><div class="content"> <article><h1 class="page-title">Learning Docker</h1><div class="meta"><span><i class="fa fa-calendar-o" aria-hidden="true"></i> 2017, Feb 22&nbsp;&nbsp;&nbsp;&nbsp;</span><span><i class="fa fa-pencil-square-o" aria-hidden="true"></i> Rohan Pande</span></div><h1 id="to-run">To Run</h1><p>= docker run docker/whalesay cowsay boo</p><h1 id="to-see-docker-images-on-system">To See Docker images on system</h1><p>= docker images</p><h1 id="writing-a-docker-file">Writing a Docker File</h1><p>= A Dockerfile is a recipe which describes the files, environment, and commands that make up an image.</p><ul><li>create a new directory mkdir mydockerbuild</li><li>cd mydockerbuild ** Edit a new text file named Dockerfile</li><li>nano Dockerfile ** Add a FROM statement by copying the following line into the file</li><li>FROM docker/whalesay:latest – the FROM keyword tells Docker which image your image is based on. ** Add a RUN statement which will install the fortunes program into the image</li><li>RUN apt-get -y update &amp;&amp; apt-get install -y fortunes ** Add a CMD statement which tells the iamge the final command to run afters its environment is setup this command runs fortune -a and sends its output to the cowsay command.</li><li>CMD /usr/games/fortune -a | cowsay ** Check your work. Your file should look just like this FROM docker/whalesay:latest RUN apt-get -y update &amp;&amp; apt-get install -y fortunes CMD /usr/games/fortune -a | cowsay</li></ul><h2 id="build-an-image-from-your-docker-file">Build an image from your docker file</h2><ul><li>docker build -t docker-whale .</li></ul><h2 id="run-your-new-docker-whale">Run your new docker-whale</h2><ul><li>docker images [ this will provide list of all images at local ]</li><li>docker run docker-whale</li></ul><h2 id="tag-and-push-the-image">Tag and push the image</h2><ul><li>docker images [ this will provide list of all images available ]</li><li>Find the image ID for the image to be tagged and pushed</li><li>docker tag image ID justrohu/image-name:version</li><li>docker images [ run again to ensure image has been tagged ]</li><li>docker login [to login into docker.hub.com account ]</li><li>docker push justrohu/image-name</li></ul><h2 id="remove-docker-image">Remove Docker Image</h2><ul><li>docker image remove [ you can refer to an image by its ID or its name ]</li><li>docker image remove image ID</li></ul><h2 id="pull-your-new-image">Pull your new image</h2><ul><li>docker images</li><li>remove duplicate images by docker image remove image ID</li><li>docker run docker/whalesay</li></ul><p>## To View List of All Containers</p><ul><li>docker ps -a</li></ul><p>## To view list of Latest created containers including non-running containers</p><ul><li>docker ps -l</li></ul><p>## To List the networks on docker</p><ul><li>docker network ls</li></ul><p>## To Launch docker into the network by default it will launch in bridge network unless customized otherwise</p><ul><li>docker run -itd –name=networktest ubuntu</li></ul><p>## inspecting the bridge is the easiest way to find containers ip address</p><ul><li>docker network inspect bridge</li></ul><p>## To disconnect the container from a network</p><ul><li>docker network disconnect bridge networktest</li></ul><p>## To create your own bridge network</p><ul><li>docker network create -d bridge my-bridge-network</li></ul><p>## To add containers to a network</p><ul><li>docker run -d –net=my-bridge-network –name db training/postgres</li></ul><p>## To inspect bridge</p><ul><li>docker inspect –format=’’ db</li></ul><p>## To add container to network without specifying network</p><ul><li>docker run -d –name web training/webapp python app.py</li></ul><p>## To get the ip address on which container is deployed</p><ul><li>docker inspect –format=’’</li></ul><p>## To open a shell to running container</p><ul><li>docker exec -it db bash</li></ul><p>## To attach a container to other network</p><ul><li>docker network connect my-bridge-network web</li></ul><p>## Data Volumes</p><p>## Adding a data volumn</p><ul><li>docker run -d -P –name web -v /webapp training/webapp python app.py</li><li>you can also use the VOLUME instruction in a Dockerfile to add one or more new volumes to any container created from that image.</li></ul><p>## Location a volumn</p><ul><li>docker inspect web [ container name ]</li></ul><p>## Mount a host directory as a data volume</p><ul><li>docker run -d -P –name web -v /src/webapp:/webapp training/webapp python app.py</li></ul><p>## Mount a host directory as data volume with read only</p><ul><li>docker run -d -P –name web -v /src/webapp:/webapp:ro training/webapp python app.py</li></ul><p>## Mount a host file as a data volume¶ ** The -v flag can also be used to mount a single file - instead of just directories - from the host machine.</p><ul><li>docker run –rm -it -v ~/.bash_histroy:/root/.bash_histroy ubuntu /bin/bash</li></ul><p>## Creating and mounting a data volume container</p><ul><li>docker create -v /dbdata –name dbstore training/postgres /bin/true</li></ul><p>## To mount the /dbdata volume in another container by using –volumes-from flag</p><ul><li>docker run -d –volumes-from dbstore –name db1 training/postgres</li><li>docker run -d –volumes-from dbstore –name db2 training/postgres</li></ul><p>## To extend chain by mounting the volume that came from the dbstore</p><ul><li>docker run -d –name db3 –volumes-from db1 training/postgres</li></ul><p>## Backup, restore or migrate data volumes</p><ul><li>docker run –rm –volumes-from dbstore -v $(pwd):/backup ubuntu tar cvf /backup/backup.tar /dbdata</li></ul><p>## To remove volumes</p><ul><li>docker run –rm -v /foot -v awesome:/bar busybox top</li></ul><p>## To delete containers</p><ul><li>docker rm -f <container></container></li></ul><p>## Delete all available containers</p><ul><li>docker rm -f $(docker ps -aq)</li></ul><p>## To expose default ports</p><ul><li>docker run -tid -P –name apache_server nimmis/apache-php5</li></ul><p>## Specify a different post <host port="">:<container port=""></container></host></p><ul><li>docker run -tid -p 80:80 –name apache_server nimmis/apache-php5</li></ul><p>## Example</p><ul><li>docker run -tid -p 80:80 –name=”apache_server” -v /Users/admin/Desktop/www/TEST:/var/www nimmis/apache-php5</li></ul><p>## Dockerfile example</p><p>FROM justrohu/apache-php5 MAINTAINER justrohu <a href="mailto:justrohu@gmail.com">justrohu@gmail.com</a> COPY 000-default.conf /etc/apache2/sites-available/000-default.conf [ overridding container httpd.conf with host conf ]</p><p>EXPOSE 80 # exposing http port EXPOSE 443 # exposing https port</p><p>## CMD [“executable”,”param1”,”param2”] { syntax on command writting }</p><p>CMD [“/usr/sbin/apache2ctl”, “-D”, “FOREGROUND”]</p><p>RUN apt-get update &amp;&amp; \ apt-get install nodejs &amp;&amp; \ apt-get install npm</p><p>ENV MYSQL_ROOT_PASSWORD=root ENV MYSQL_ROOT_USER=root</p></article><div class="comment"> <button class="show-comments"><i class="fa fa-comments" aria-hidden="true"> Load/Add comments</i></button><div id="disqus_thread"></div></div><script src=/js/jquery.min.js></script><script> $(document).ready(function() { $('.show-comments').on('click', function(){ var disqus_shortname = 'www-rohanpande-in'; $.ajax({ type: "GET", url: "http://" + disqus_shortname + ".disqus.com/embed.js", dataType: "script", cache: true }); $(this).fadeOut(); }); });</script></div></div><footer><p style="margin: 0">Copyrights 2017. All Rights Reserved by Rohan Pande</p><p style="margin: 0">Image credits - <a href="https://unsplash.com/" target="_blank">Unsplash</a></p></footer></div><script> function openNav() { document.getElementById("mySidenav").style.width = "250px"; } function closeNav() { document.getElementById("mySidenav").style.width = "0"; }</script><link href="//maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" rel="stylesheet" type="text/css"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create', 'UA-44574967-4','auto'); ga('send', 'pageview');</script></body></html>
